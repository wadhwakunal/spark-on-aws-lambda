1. Navigate to the "cloudformation" folder and run the AWS SAM template sam-imagebuilder.yaml using the following command:
	sam deploy --template-file sam-imagebuilder.yaml --stack-name spark-lambda-image-builder --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3
	sam deploy --template-file sam-imagebuilder.yaml --stack-name spark-lambda-debugger-image-builder --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3
	sam deploy --template-file sam-imagebuilder.yaml --stack-name spark-lambda-with-glue-image-builder --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3
	sam deploy --template-file sam-imagebuilder.yaml --stack-name spark-lambda-batch-image-builder --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3
	
2. After the stack has been successfully deployed, copy the ECR repository URI (spark-on-lambda-image-builder) that is displayed in the output of the stack.

3. Run the AWS SAM Lambda package with the required Region and ECR repository:
	sam deploy --template-file sam-template-files-collector-merger-lambda.yaml --stack-name bb-playerstocks-collector-merger --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --parameter-overrides 'ParameterKey=FilesCollectorMetadataBucketName,ParameterValue=bb-datalake ParameterKey=FilesCollectorMetadataKeyName,ParameterValue=metadata/bb_playerstocks_participated_users ParameterKey=FilesCollectorSourceBucketName,ParameterValue=bb-playerstocks-participated-users-prod-kinesis ParameterKey=FilesMergerSleepTime,ParameterValue=10  ParameterKey=FilesMergerSourceBucketName,ParameterValue=bb-datalake'

	sam deploy --template-file sam-template.yaml --stack-name bb-market-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-on-lambda-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb-market.py ParameterKey=DatabaseName,ParameterValue=bb_datalake_validated ParameterKey=TableName,ParameterValue=bb_market ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-on-lambda-image-builder:latest'

	sam deploy --template-file sam-template.yaml --stack-name bb-matched-bids-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-on-lambda-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_matched_bids.py ParameterKey=DatabaseName,ParameterValue=bb_datalake_validated ParameterKey=TableName,ParameterValue=bb_matched_bids ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-on-lambda-image-builder:latest'

	sam deploy --template-file sam-template.yaml --stack-name bb-pending-bids-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-on-lambda-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_pending_bids.py ParameterKey=DatabaseName,ParameterValue=bb_datalake_validated ParameterKey=TableName,ParameterValue=bb_pending_bids ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-on-lambda-image-builder:latest'

	sam deploy --template-file sam-template.yaml --stack-name bb-market-delta-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-soal-debug-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_market_delta.py ParameterKey=DatabaseName,ParameterValue=bb_datalake_validated ParameterKey=TableName,ParameterValue=bb_market_delta ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-soal-debug-image-builder:latest'

	sam deploy --template-file sam-template-files-collector-lambda.yaml --stack-name bb-market-delta --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --parameter-overrides 'ParameterKey=MetadataBucketName,ParameterValue=bb-datalake ParameterKey=MetadataKeyName,ParameterValue=metadata/bb_market_delta ParameterKey=SourceBucketName,ParameterValue=bb-market-prod-kinesis-datastreams-dynamo ParameterKey=NotificationsSaveMode,ParameterValue=Insert'

	sam deploy --template-file sam-template.yaml --stack-name bb-market --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-image-builder:latest --parameter-overrides 'ParameterKey=FilesCollectorMetadataBucketName,ParameterValue=bb-datalake ParameterKey=FilesCollectorMetadataKeyName,ParameterValue=metadata/bb_market ParameterKey=FilesCollectorSourceBucketName,ParameterValue=bb-market-prod-kinesis-datastreams-dynamo ParameterKey=FilesCollectorNotificationsSaveMode,ParameterValue=Insert ParameterKey=FilesMergerSleepTime,ParameterValue=10  ParameterKey=FilesMergerSourceBucketName,ParameterValue=bb-datalake ParameterKey=SparkLambdaScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkLambdaSparkScript,ParameterValue=pyspark_scripts/bb_market.py ParameterKey=SparkLambdaDatabaseName,ParameterValue=bb_datalake_validated ParameterKey=SparkLambdaTableName,ParameterValue=bb_market ParameterKey=SparkLambdaAthenaWorkgroup,ParameterValue=bb-datalake ParameterKey=SparkLambdaImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-image-builder:latest'

	sam deploy --template-file sam-template.yaml --stack-name bb-matched-bids --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-image-builder:latest --parameter-overrides 'ParameterKey=FilesCollectorMetadataBucketName,ParameterValue=bb-datalake ParameterKey=FilesCollectorMetadataKeyName,ParameterValue=metadata/bb_matched_bids ParameterKey=FilesCollectorSourceBucketName,ParameterValue=bb-matched-bids-prod-kinesis-datastreams-dynamo ParameterKey=FilesCollectorNotificationsSaveMode,ParameterValue=Insert ParameterKey=FilesMergerSleepTime,ParameterValue=10  ParameterKey=FilesMergerSourceBucketName,ParameterValue=bb-datalake ParameterKey=SparkLambdaScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkLambdaSparkScript,ParameterValue=pyspark_scripts/bb_matched_bids.py ParameterKey=SparkLambdaDatabaseName,ParameterValue=bb_datalake_validated ParameterKey=SparkLambdaTableName,ParameterValue=bb_matched_bids ParameterKey=SparkLambdaAthenaWorkgroup,ParameterValue=bb-datalake ParameterKey=SparkLambdaImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-image-builder:latest'
	
	sam deploy --template-file sam-template.yaml --stack-name bb-pending-bids --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-image-builder:latest --parameter-overrides 'ParameterKey=FilesCollectorMetadataBucketName,ParameterValue=bb-datalake ParameterKey=FilesCollectorMetadataKeyName,ParameterValue=metadata/bb_pending_bids ParameterKey=FilesCollectorSourceBucketName,ParameterValue=bb-pending-bids-prod-kinesis-datastreams-dynamo ParameterKey=FilesCollectorNotificationsSaveMode,ParameterValue=Insert ParameterKey=FilesMergerSleepTime,ParameterValue=10  ParameterKey=FilesMergerSourceBucketName,ParameterValue=bb-datalake ParameterKey=SparkLambdaScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkLambdaSparkScript,ParameterValue=pyspark_scripts/bb_pending_bids.py ParameterKey=SparkLambdaDatabaseName,ParameterValue=bb_datalake_validated ParameterKey=SparkLambdaTableName,ParameterValue=bb_pending_bids ParameterKey=SparkLambdaAthenaWorkgroup,ParameterValue=bb-datalake ParameterKey=SparkLambdaImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-market-spark-job --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_market.py ParameterKey=DatabaseName,ParameterValue=bb_datalake_validated ParameterKey=TableName,ParameterValue=bb_market ParameterKey=AthenaWorkgroup,ParameterValue=bb-datalake ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name debugging-spark-job --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-debugger-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_pending_bids.py ParameterKey=DatabaseName,ParameterValue=bb_datalake_validated ParameterKey=TableName,ParameterValue=bb_pending_bids ParameterKey=AthenaWorkgroup,ParameterValue=bb-datalake ParameterKey=GlueJob,ParameterValue=BBPendingBidsJob ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-debugger-image-builder:latest'

	sam deploy --template-file sam-template.yaml --stack-name trigger-trial --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --parameter-overrides 'ParameterKey=FilesCollectorLambdaArn,ParameterValue=arn:aws:lambda:ap-south-1:647554026283:function:FilesCollector-bb-pending-bids ParameterKey=FilesCollectorSourceBucketName,ParameterValue=bb-pending-bids-prod-kinesis-datastreams-dynamo ParameterKey=FilesCollectorNotificationsSaveMode,ParameterValue=Insert'

	sam deploy --template-file sam-template.yaml --stack-name bb-pending-bids-s3-trigger --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --parameter-overrides 'ParameterKey=FilesCollectorLambdaArn,ParameterValue=arn:aws:lambda:ap-south-1:647554026283:function:FilesCollector-bb-pending-bids ParameterKey=FilesCollectorSourceBucketName,ParameterValue=bb-pending-bids-prod-kinesis-datastreams-dynamo ParameterKey=FilesCollectorNotificationsSaveMode,ParameterValue=Insert'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-matched-bids-spark-job --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_matched_bids.py ParameterKey=DatabaseName,ParameterValue=bb_datalake_validated ParameterKey=TableName,ParameterValue=bb_matched_bids ParameterKey=AthenaWorkgroup,ParameterValue=bb-datalake ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-image-builder:latest'

	sam deploy --template-file sam-template-glue-and-spark-job-lambda.yaml --stack-name bb-pending-bids-spark-job --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-with-glue-image-builder:latest --parameter-overrides 'ParameterKey=GlueJobName,ParameterValue=BBPendingBidsJob ParameterKey=GlueJobRole,ParameterValue=AWS-Glue-ServiceRole-bb-datalake ParameterKey=GlueScriptBucket,ParameterValue=bb-datalake ParameterKey=GlueScriptKey,ParameterValue=pyspark_scripts/bb_pending_bids_glue_job.py ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_pending_bids.py ParameterKey=DatabaseName,ParameterValue=bb_datalake_validated ParameterKey=TableName,ParameterValue=bb_pending_bids ParameterKey=AthenaWorkgroup,ParameterValue=bb-datalake ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-with-glue-image-builder:latest'

	sam deploy --template-file sam-template-glue-job.yaml --stack-name bb-pending-bids-glue-job --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --parameter-overrides 'ParameterKey=JobName,ParameterValue=BBPendingBidsJob ParameterKey=JobRole,ParameterValue=AWS-Glue-ServiceRole-bb-datalake ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=ScriptKey,ParameterValue=pyspark_scripts/bb_pending_bids_glue_job.py'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-admin-cash-added-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_admin_cash_added.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-bonus-added-as-unused-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_bonus_added_as_unused.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-bonus-expired-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_bonus_expired.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-transfer-affiliate-wallet-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_transfer_affiliate_wallet.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-stats-pro-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_stats_pro.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-player-stocks-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_player_stocks.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-tds-reverted-by-admin-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_tds_reverted_by_admin.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-withdrawal-transfer-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_withdrawal_transfer.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-levels-card-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_levels_card.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-level-user-cards-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_level_user_cards.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-withdrawals-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_withdrawals.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-reward-product-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_reward_product.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-reward-claim-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_reward_claim.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'
	
	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-leaders-3-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_leaders_3.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-leaders-2-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_leaders_2.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-leaders-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_leaders.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-poker-transactions-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_poker_transactions.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-user-passes-purchased-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_user_passes_purchased.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-leaders-arcade-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_leaders_arcade.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-bonus-stats-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_bonus_stats.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-campaign-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_campaign.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-txn-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_txn.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-campaign-codes-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_campaign_codes.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-tsp-user-leagues-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_tsp_user_leagues.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-user-leagues-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_user_leagues.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name fb-user-leagues-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/fb_user_leagues.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name kb-user-leagues-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/kb_user_leagues.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-users-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_users.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-leagues-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_leagues.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-matches-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_matches.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

	sam deploy --template-file sam-template-spark-job-lambda.yaml --stack-name bb-market-spark-lambda --capabilities CAPABILITY_IAM CAPABILITY_NAMED_IAM --resolve-s3 --image-repository 647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest --parameter-overrides 'ParameterKey=ScriptBucket,ParameterValue=bb-datalake ParameterKey=SparkScript,ParameterValue=pyspark_scripts/bb_market.py ParameterKey=ImageUri,ParameterValue=647554026283.dkr.ecr.ap-south-1.amazonaws.com/sparkonlambda-spark-lambda-batch-image-builder:latest'

4. Clean up
	sam delete --stack-name spark-on-lambda-stack
	sam delete --stack-name spark-on-lambda-image-builder


